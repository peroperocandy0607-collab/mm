<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>副業占い師の教科書 - 書籍解説動画メーカー</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Zen Maru Gothic', sans-serif;
        background-color: #fafaf9; /* Stone-50 equivalent for warm white */
        color: #44403c; /* Stone-700 for text */
      }
      /* Custom scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #f5f5f4; 
      }
      ::-webkit-scrollbar-thumb {
        background: #d6d3d1; /* Stone-300 */
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #a8a29e; /* Stone-400 */
      }
    </style>

  <script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "react/": "https://esm.sh/react@^19.2.3/",
    "@google/genai": "https://esm.sh/@google/genai@^1.33.0",
    "lucide-react": "https://esm.sh/lucide-react@^0.561.0",
    "vite": "https://esm.sh/vite@^7.2.7",
    "@vitejs/plugin-react": "https://esm.sh/@vitejs/plugin-react@^5.1.2"
  }
}
</script>
  <script type="module" crossorigin src="./assets/index-B9slwCPc.js"></script>
</head>
  <body>
    <div id="root"></div>
    <!-- Vite Entry Point: Changed from "/src/..." to "./src/..." for relative path support -->
    <textarea id="text" rows="4" style="width:100%;">
こんにちは、音声テストです
</textarea>

<br><br>

<button onclick="generateVoice()">
  音声生成
</button>

<script>
async function generateVoice() {
  alert("音声生成スタート"); // ← 反応確認

  const text = document.getElementById("text").value;

  const res = await fetch("https://mm-one.vercel.app/api/tts", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ text }),
  });

  alert("APIから返事が来ました");

  if (!res.ok) {
    alert("APIエラー：" + res.status);
    return;
  }

  const blob = await res.blob();
  const url = URL.createObjectURL(blob);

  // ★ 確実に音を出す方法
  const audio = document.createElement("audio");
  audio.src = url;
  audio.controls = true;   // ← 再生ボタンを出す
  audio.autoplay = true;

  document.body.appendChild(audio);

  alert("再生バーを表示しました");
}
</script>
    
  </body>
</html>
